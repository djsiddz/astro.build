---
import siteInfo from "~/data/site-info.js";
import SocialLinks from "./SocialLinks.astro";
import NewsLetterSignup from "./NewsLetterSignup.astro";

type Link = {
	href: string;
	label: string;
};

type LinkGroup = {
	title: string;
	links: Link[];
};

const groups: LinkGroup[] = [
	{
		title: "Resources",
		links: [
			{ label: "Docs", href: "https://docs.astro.build/en/getting-started/" },
			{ label: "Themes", href: "/themes/" },
			{ label: "Showcase", href: "/showcase/" },
			{ label: "Integrations", href: "/integrations/" },
			{ label: "Starter templates", href: "https://astro.new/" },
		],
	},
	{
		title: "Ecosystem",
		links: [
			{label: "Studio", href: "https://studio.astro.build/"},
			{ label: "Community", href: "https://community.astro.build" },
			{ label: "Contributing", href: "https://github.com/withastro/astro/blob/main/CONTRIBUTING.md" },
		],
	},
	{
		title: "About",
		links: [
			{ label: "Press", href: "/press/" },
			{ label: "Telemetry", href: "/telemetry/" },
			{ label: "Partner with us", href: "/partnerships/" },
		],
	},
	{
		title: "More",
		links: [
			{ label: "Blog", href: "/blog/" },
			{ label: "Wallpapers", href: "/wallpapers/" },
			{ label: "Swag Shop", href: "https://shop.astro.build" },
		],
	},
	{
		title: "Legal",
		links: [
			{ label: "Privacy Policy", href: "/privacy/" },
			{ label: "Terms of Service", href: "terms" },
		],
	},
];

const socialLinks = siteInfo.socialLinks;
---

<footer class="container">
	<nav
		aria-label="Secondary"
		class="flex flex-col links-start justify-between gap-12 py-8 sm:flex-row-reverse md:py-12"
	>
		<NewsLetterSignup />
		<div class="grid grid-cols-2 gap-12 sm:flex sm:flex-wrap sm:gap-16 lg:gap-20">
			{
				groups.map(({ title, links }, index) => (
					<section class="group flex flex-col">
						<h2 id={`footerHeading${index}`} class="code mb-4 label-base leading-none opacity-50">
							{title}
						</h2>
						<ul aria-labelledby={`footerHeading${index}`} class="flex flex-col gap-2">
							{links.map(({ href, label }) => (
								<li>
									<a href={href} class="link whitespace-nowrap">
										{label}
									</a>
								</li>
							))}
						</ul>
					</section>
				))
			}
		</div>
	</nav>
	<hr class="border-astro-gray-500" />
	<nav
		aria-label="Legal"
		class="flex flex-col-reverse gap-x-8 gap-y-4 py-8 md:flex-row md:links-center md:justify-between md:py-12"
	>
		<div class="mt-6 flex flex-col gap-x-8 gap-y-4 md:mt-0 md:flex-row">
			<a class="link opacity-80" href="/privacy/">Privacy Policy</a>
			<a class="link opacity-80" href="/terms/">Terms of Service</a>
			<p class="font-mono mr-auto mt-6 opacity-50 md:mt-0">
				<a href="https://github.com/withastro/astro/blob/main/LICENSE" target="_blank" class="link"
					>MIT License</a
				> &copy; {new Date().getFullYear()}&nbsp;
				<a
					href="https://github.com/withastro/astro/graphs/contributors"
					class="link"
					target="_blank">Astro Contributors</a
				>
			</p>
		</div>
		<SocialLinks links={socialLinks} />
	</nav>
</footer>
